<div class="button-action">
    <button nz-button nzType="primary">
        <nz-icon nzType="send" nzTheme="outline" /> Trình duyệt
    </button>

    <button nz-button nzType="primary" class="btn-green">
        <nz-icon nzType="check" nzTheme="outline" /> Phê duyệt
    </button>

    <button nz-button nzType="primary" nzDanger="">
        <nz-icon nzType="close" nzTheme="outline" /> Từ chối
    </button>

    <button nz-button nzType="primary" class="btn-green">
        <nz-icon nzType="save" nzTheme="outline" /> Cập nhật thông tin
    </button>

    <button nz-button nzType="default">
        <nz-icon nzType="history" nzTheme="outline" /> Lịch sử hành động
    </button>
</div>
<div>
    <nz-splitter>
        <nz-splitter-panel [nzDefaultSize]="'26%'">
            <div class="box">
                <div class="project-workflow">
                    <div>

                    </div>
                    <nz-timeline>
                        <nz-timeline-item nzColor="#339933">
                            <div class="item-workflow">
                                <div class="name-step-workflow-done">
                                    BƯỚC 1
                                </div>
                                <div class="detail-workflow">
                                    <div class="item-detail">
                                        <span><nz-icon nzType="calendar" nzTheme="outline" /></span>
                                        <span style="font-weight: 600;">Ngày xử lý:</span>
                                        <span>10/10/2025</span>
                                    </div>

                                    <div class="item-detail">
                                        <span><nz-icon nzType="user" nzTheme="outline" /></span>
                                        <span style="font-weight: 600;">Người xử lý:</span>
                                        <span>10/10/2025</span>
                                    </div>

                                    <div class="item-detail">
                                        <span><nz-icon nzType="bars" nzTheme="outline" /></span>
                                        <span style="font-weight: 600;">Trạng thái:</span>
                                        <span>
                                            <nz-tag nzColor="success">
                                                <nz-icon nzType="check-circle" />
                                                <span>Hoàn thành</span>
                                            </nz-tag>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </nz-timeline-item>
                        <nz-timeline-item nzColor="#1890FF">
                            <div class="item-workflow">
                                <div class="name-step-workflow-processing">
                                    TRÌNH DUYỆT
                                </div>
                                <div class="detail-workflow">
                                    <div class="item-detail">
                                        <span><nz-icon nzType="calendar" nzTheme="outline" /></span>
                                        <span style="font-weight: 600;">Ngày xử lý:</span>
                                        <span>10/10/2025</span>
                                    </div>

                                    <div class="item-detail">
                                        <span><nz-icon nzType="user" nzTheme="outline" /></span>
                                        <span style="font-weight: 600;">Người xử lý:</span>
                                        <span>10/10/2025</span>
                                    </div>

                                    <div class="item-detail">
                                        <span><nz-icon nzType="bars" nzTheme="outline" /></span>
                                        <span style="font-weight: 600;">Trạng thái:</span>
                                        <span>
                                            <nz-tag nzColor="processing">
                                                <nz-icon nzType="sync" nzSpin />
                                                <span>Đang xử lý</span>
                                            </nz-tag>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </nz-timeline-item>

                        <nz-timeline-item nzColor="gray">
                            <div class="item-workflow">
                                <div class="name-step-workflow-gray">
                                    XÁC NHẬN
                                </div>
                                <div class="detail-workflow">
                                    <div class="item-detail">
                                        <span><nz-icon nzType="user" nzTheme="outline" /></span>
                                        <span style="font-weight: 600;">Người xử lý:</span>
                                        <span>10/10/2025</span>
                                    </div>

                                    <div class="item-detail">
                                        <span><nz-icon nzType="bars" nzTheme="outline" /></span>
                                        <span style="font-weight: 600;">Trạng thái:</span>
                                        <span>
                                            <nz-tag nzColor="default">
                                                <nz-icon nzType="clock-circle" />
                                                <span>Chưa bắt đầu</span>
                                            </nz-tag>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </nz-timeline-item>

                        <nz-timeline-item nzColor="gray">
                            <div class="item-workflow">
                                <div class="name-step-workflow-gray">
                                    XÁC NHẬN
                                </div>
                                <div class="detail-workflow">
                                    <div class="item-detail">
                                        <span><nz-icon nzType="user" nzTheme="outline" /></span>
                                        <span style="font-weight: 600;">Người xử lý:</span>
                                        <span>10/10/2025</span>
                                    </div>

                                    <div class="item-detail">
                                        <span><nz-icon nzType="bars" nzTheme="outline" /></span>
                                        <span style="font-weight: 600;">Trạng thái:</span>
                                        <span>
                                            <nz-tag nzColor="default">
                                                <nz-icon nzType="clock-circle" />
                                                <span>Chưa bắt đầu</span>
                                            </nz-tag>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </nz-timeline-item>

                        <nz-timeline-item nzColor="gray">
                            <div class="item-workflow">
                                <div class="name-step-workflow-gray">
                                    PHÊ DUYỆT
                                </div>
                                <div class="detail-workflow">
                                    <div class="item-detail">
                                        <span><nz-icon nzType="user" nzTheme="outline" /></span>
                                        <span style="font-weight: 600;">Người xử lý:</span>
                                        <span>10/10/2025</span>
                                    </div>

                                    <div class="item-detail">
                                        <span><nz-icon nzType="bars" nzTheme="outline" /></span>
                                        <span style="font-weight: 600;">Trạng thái:</span>
                                        <span>
                                            <nz-tag nzColor="default">
                                                <nz-icon nzType="clock-circle" />
                                                <span>Chưa bắt đầu</span>
                                            </nz-tag>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </nz-timeline-item>
                    </nz-timeline>
                </div>
            </div>
        </nz-splitter-panel>
        <nz-splitter-panel>
            <div class="box">
                <div class="project-detail">
                    <div nz-row [nzGutter]="12">

                        <div nz-col nzSpan="6">
                            <label>Mã dự án</label>
                            <input nz-input [(ngModel)]="project.code" class="space-control" />
                        </div>
                        <div nz-col nzSpan="18">
                            <label>Tên dự án</label>
                            <input nz-input [(ngModel)]="project.name" class="space-control" />
                        </div>

                        <div nz-col nzSpan="24">
                            <label>Đơn vị phụ trách</label>
                            <nz-select nzShowSearch nzAllowClear [(ngModel)]="project.donViPhuTrach"
                                class="space-control" [nzDisabled]="true">
                                <nz-option *ngFor="let i of lstOrganize" [nzLabel]="i.name"
                                    [nzValue]="i.id"></nz-option>
                            </nz-select>
                        </div>
                        <div nz-col nzSpan="6">
                            <label>Lãnh đạo phụ trách</label>
                            <nz-select nzShowSearch nzAllowClear [(ngModel)]="project.lanhDaoPhuTrach"
                                class="space-control">
                                <nz-option *ngFor="let i of lstAccount" [nzLabel]="i.fullName"
                                    [nzValue]="i.userName"></nz-option>
                            </nz-select>
                        </div>
                        <div nz-col nzSpan="6">
                            <label>PM dự án</label>
                            <nz-select nzShowSearch nzAllowClear [(ngModel)]="project.pmDuAn" class="space-control">
                                <nz-option *ngFor="let i of lstAccount" [nzLabel]="i.fullName"
                                    [nzValue]="i.userName"></nz-option>
                            </nz-select>
                        </div>

                        <div nz-col nzSpan="6">
                            <label>Phụ trách dự án</label>
                            <nz-select nzShowSearch nzAllowClear [(ngModel)]="project.phuTrachDuAn"
                                class="space-control">
                                <nz-option *ngFor="let i of lstAccount" [nzLabel]="i.fullName"
                                    [nzValue]="i.userName"></nz-option>
                            </nz-select>
                        </div>
                        <div nz-col nzSpan="6">
                            <label>Quản lý hợp đồng</label>
                            <nz-select nzShowSearch nzAllowClear [(ngModel)]="project.quanLyHopDong"
                                class="space-control">
                                <nz-option *ngFor="let i of lstAccount" [nzLabel]="i.fullName"
                                    [nzValue]="i.userName"></nz-option>
                            </nz-select>
                        </div>


                        <div nz-col nzSpan="24">
                            <label>Khách hàng</label>
                            <nz-select nzShowSearch nzAllowClear [(ngModel)]="project.khachHang" class="space-control">
                                <nz-option *ngFor="let i of lstCustomer" [nzLabel]="i.name"
                                    [nzValue]="i.code"></nz-option>
                            </nz-select>
                        </div>

                        <div nz-col nzSpan="6">
                            <label>Cấp dự án</label>
                            <nz-select nzShowSearch nzAllowClear [(ngModel)]="project.capDuAn" class="space-control">
                                <nz-option *ngFor="let i of capDuAn" [nzLabel]="i.name" [nzValue]="i.code"></nz-option>
                            </nz-select>
                        </div>

                        <div nz-col nzSpan="6">
                            <label>Loại dự án</label>
                            <nz-select nzShowSearch nzAllowClear [(ngModel)]="project.loaiDuAn" class="space-control">
                                <nz-option *ngFor="let i of loaiDuAn" [nzLabel]="i.name" [nzValue]="i.code"></nz-option>
                            </nz-select>
                        </div>
                        <div nz-col nzSpan="6">
                            <label>Ngày bắt đầu</label>
                            <nz-date-picker [(ngModel)]="project.startDate" class="space-control"
                                [nzFormat]="'dd/MM/yyyy'"></nz-date-picker>
                        </div>
                        <div nz-col nzSpan="6">
                            <label>Ngày kết thúc</label>
                            <nz-date-picker [(ngModel)]="project.endDate" class="space-control"
                                [nzFormat]="'dd/MM/yyyy'"></nz-date-picker>
                        </div>
                        <div nz-col nzSpan="6">
                            <label>Khu vực</label>
                            <input nz-input [(ngModel)]="project.khuVuc" class="space-control" />
                        </div>
                        <div nz-col nzSpan="6">
                            <label>Địa điểm</label>
                            <input nz-input [(ngModel)]="project.diaDiem" class="space-control" />
                        </div>
                        <div nz-col nzSpan="12">
                            <label>Quy trình</label>
                            <input nz-input [(ngModel)]="project.diaDiem" class="space-control" />
                        </div>
                        <div nz-col nzSpan="24">
                            <label>Ghi chú</label>
                            <input nz-input [(ngModel)]="project.notes" class="space-control" />
                        </div>

                        <div nz-col nzSpan="8" *ngFor="let f of project.files">
                            <div class="file-item">
                                <div><img [src]="f.icon" width="30" style="margin-right: 12px;"></div>
                                <div>
                                    <span style="font-weight: 600;">{{f.fileName}}</span><br>
                                    <span style="font-size:12px; color: gray">{{ f.fileSize < 1048576 ? (f.fileSize /
                                            1024 | number : "1.1-1" ) + " KB" : (f.fileSize / 1048576 | number : "1.1-1"
                                            ) + " MB" }}</span>
                                </div>
                                <div style="margin-left: auto;color: rgb(220, 53, 69);;">
                                    <nz-icon nzType="delete" nzTheme="outline" />
                                </div>
                            </div>
                        </div>

                        <div nz-col nzSpan="24">
                            <div class="file-upload-area" (click)="fileInput.click()">
                                <div>
                                    <img src="img/folder_upload.png" class="img-upload">
                                </div>
                                <h3>Tải lên file đính kèm dự án</h3>
                                <p style="color: #666; font-size: 14px;">Hỗ trợ các định dạng: PDF, DOC,
                                    DOCX,
                                    XLS, XLSX, PNG, JPG</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nz-splitter-panel>
        <nz-splitter-panel [nzDefaultSize]="'22%'">
            <div class="box">
                <div>
                    <nz-divider nzText="GIAI ĐOẠN DỰ ÁN"></nz-divider>
                </div>
                <div class="process-project">
                    <nz-tag nzColor="processing" *ngIf="giaiDoanHienTai" style="margin-bottom: 12px;">
                        <nz-icon nzType="sync" nzSpin />
                        <span>{{giaiDoanHienTai.name}}</span>
                    </nz-tag>
                    <nz-tag nzColor="success" *ngIf="!giaiDoanHienTai" style="margin-bottom: 12px;">
                        <nz-icon nzType="check-circle" />
                        <span>Hoàn thành</span>
                    </nz-tag>
                    <button nz-button nzType="default" (click)="chuyenTiepGiaiDoan()">
                        <nz-icon nzType="double-right" nzTheme="outline" /> Chuyển tiếp giai đoạn
                    </button>
                </div>
                <div class="project-step">
                    <nz-steps [nzCurrent]="project.giaiDoan" nzDirection="vertical">
                        <nz-step *ngFor="let i of project.listGiaiDoan" [nzTitle]="i.name"
                            [nzDescription]=" 'Mã giai đoạn: ' + i.code"></nz-step>
                    </nz-steps>
                </div>

            </div>
        </nz-splitter-panel>
    </nz-splitter>
</div>

<input type="file" #fileInput hidden multiple (change)="upload($event)" />