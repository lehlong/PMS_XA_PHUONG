<nz-page-header nzBackIcon>
    <nz-page-header-title>LOGGING HỆ THỐNG</nz-page-header-title>
    <nz-page-header-subtitle>Chi tiết log hệ thống ({{ logs.length }} dòng)</nz-page-header-subtitle>
    <nz-page-header-extra>
        <nz-space>
            <nz-date-picker *nzSpaceItem [(ngModel)]="dateSelected" (ngModelChange)="onChangeDate($event)"
                nzPlaceHolder="Chọn ngày">
            </nz-date-picker>

            <button *nzSpaceItem nz-button nzType="default" (click)="getLogToday()">
                <nz-icon nzType="search" />
            </button>

            <button *nzSpaceItem nz-button nzType="default" (click)="scrollToTop()" nzTooltipTitle="Lên đầu">
                <nz-icon nzType="arrow-up" />
            </button>

            <button *nzSpaceItem nz-button nzType="default" (click)="scrollToBottom()" nzTooltipTitle="Xuống cuối">
                <nz-icon nzType="arrow-down" />
            </button>

            @if(!isFullscreen){
            <button *nzSpaceItem nz-button nzType="default" (click)="toggleFullscreen()" nzTooltipTitle="Toàn màn hình">
                <nz-icon nzType="fullscreen" />
            </button>
            }
            @if(isFullscreen){
            <button *nzSpaceItem nz-button nzType="default" (click)="toggleFullscreen()"
                nzTooltipTitle="Thoát toàn màn hình">
                <nz-icon nzType="fullscreen-exit" />
            </button>
            }
        </nz-space>
    </nz-page-header-extra>
    <nz-page-header-content>

        <cdk-virtual-scroll-viewport itemSize="28" class="log-container">
            <div *cdkVirtualFor="let log of logs" [ngClass]="getLevelClass(log.level)" class="log-line">
                <span class="timestamp">{{ formatTimestamp(log.timestamp) }}</span>
                <span class="level" *ngIf="log.level != 'TXT'">[{{ log.level }}]</span>
                <span class="message">{{ log.message }} <br>
                    <span class="properties">{{ log.properties }}</span>
                </span>
                
            </div>
        </cdk-virtual-scroll-viewport>

    </nz-page-header-content>
</nz-page-header>